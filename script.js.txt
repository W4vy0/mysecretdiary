let page = 1;
let unlocked = false;

const pageImage = document.getElementById("pageImage");
const lock = document.getElementById("lock");
const key = document.getElementById("key");
const nextBtn = document.getElementById("nextBtn");

const bgm = document.getElementById("bgm");
const bgmBtn = document.getElementById("bgmBtn");

// ğŸ”Š ì‚¬ìš´ë“œ
const unlockSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_9f9d7b9a7b.mp3"); // ë”¸ê¹
const pageSound = new Audio("page.mp3"); // ì¢…ì´ ë„˜ê¹€

pageSound.volume = 0.6;

// ğŸ”‘ ì—´ì‡  â†’ ìë¬¼ì‡ 
key.onclick = () => {
  if (!unlocked) {
    unlocked = true;
    unlockSound.play();
    lock.style.display = "none";
    key.style.display = "none";
    nextBtn.style.display = "block"; // 2í˜ì´ì§€ ì§„ì… ê°€ëŠ¥
  }
};

// â–¶ í˜ì´ì§€ ë„˜ê¸°ê¸° (2,3,4,5ë§Œ)
nextBtn.onclick = () => {
  if (page === 1 && !unlocked) return;

  if (page >= 1 && page < 6) {
    page++;
    pageSound.currentTime = 0;
    pageSound.play();
    pageImage.src = `${page}.png`;
  }

  // 1í˜ì´ì§€ ì „ìš© ìš”ì†Œ
  if (page === 1) {
    lock.style.display = "block";
    key.style.display = "block";
    nextBtn.style.display = "none";
  } 
  // 2~5í˜ì´ì§€ â†’ ë„˜ê¹€ ê°€ëŠ¥
  else if (page >= 2 && page <= 5) {
    lock.style.display = "none";
    key.style.display = "none";
    nextBtn.style.display = "block";
  } 
  // 6í˜ì´ì§€ â†’ ë„˜ê¹€ ì¢…ë£Œ
  else {
    nextBtn.style.display = "none";
  }
};

// ğŸ”Š BGM í† ê¸€
bgmBtn.onclick = () => {
  if (bgm.paused) {
    bgm.play();
    bgmBtn.textContent = "ğŸ”‡";
  } else {
    bgm.pause();
    bgmBtn.textContent = "ğŸ”Š";
  }
};

// ì´ˆê¸° ìƒíƒœ
nextBtn.style.display = "none";